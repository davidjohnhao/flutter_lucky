# 扑克战绩跟踪器 - 用户操作流程图

## 1. 核心用户旅程

```mermaid
journey
    title 用户使用扑克战绩跟踪器的核心旅程
    section 首次使用
      下载安装: 5: 用户
      注册/登录: 3: 用户
      浏览引导流程: 4: 用户
      设置个人资料: 3: 用户
    section 记录战绩
      创建现金局记录: 5: 用户
      记录买入金额: 5: 用户
      游戏过程中记录笔记: 3: 用户
      结束游戏记录结果: 5: 用户
    section 分析数据
      查看汇总数据: 4: 用户
      分析不同维度数据: 4: 用户
      导出/分享战绩: 3: 用户
```

## 2. 详细用户流程图

### 2.1 注册与登录流程

```mermaid
flowchart TD
    A[启动应用] --> B{是否首次使用?}
    B -->|是| C[欢迎页面]
    B -->|否| D[登录页面]
    
    C --> E[注册选项展示]
    E --> F{选择注册方式}
    F -->|邮箱| G[邮箱注册表单]
    F -->|手机号| H[手机号注册表单]
    F -->|第三方账号| I[第三方授权]
    
    G --> J[验证邮箱]
    H --> K[验证手机号]
    I --> L[获取授权信息]
    
    J --> M[设置密码]
    K --> M
    L --> N[创建账户]
    M --> N
    
    N --> O[个人信息设置]
    O --> P[引导页面]
    
    D --> Q{选择登录方式}
    Q -->|账号密码| R[输入账号密码]
    Q -->|第三方登录| S[第三方授权]
    
    R --> T[验证登录信息]
    S --> T
    
    T --> U{验证结果}
    U -->|成功| V[首页]
    U -->|失败| W[错误提示]
    W --> D
    
    P --> V
```

### 2.2 现金局记录流程

```mermaid
flowchart TD
    A[首页] --> B[点击新建现金局]
    B --> C[填写基本信息]
    C --> D[选择游戏类型]
    D --> E[设置盲注级别]
    E --> F[填写地点]
    F --> G[记录初始买入]
    G --> H[保存创建现金局]
    
    H --> I[进行中状态]
    I --> J{需要追加买入?}
    J -->|是| K[记录追加买入]
    K --> I
    
    I --> L{需要记录笔记?}
    L -->|是| M[添加笔记/手牌]
    M --> I
    
    I --> N{游戏结束?}
    N -->|否| I
    N -->|是| O[记录最终带出]
    O --> P[填写结束时间]
    P --> Q[添加总结笔记]
    Q --> R[保存完成记录]
    R --> S[查看盈亏结果]
    S --> T[返回首页]
```

### 2.3 锦标赛记录流程

```mermaid
flowchart TD
    A[首页] --> B[点击新建锦标赛]
    B --> C[填写基本信息]
    C --> D[选择锦标赛类型]
    D --> E[填写买入金额]
    E --> F[记录服务费]
    F --> G[填写参赛人数]
    G --> H[保存创建锦标赛]
    
    H --> I[进行中状态]
    I --> J{需要再买入?}
    J -->|是| K[记录再买入]
    K --> I
    
    I --> L{需要附加买入?}
    L -->|是| M[记录附加买入]
    M --> I
    
    I --> N{需要记录笔记?}
    N -->|是| O[添加比赛笔记]
    O --> I
    
    I --> P{比赛结束?}
    P -->|否| I
    P -->|是| Q[记录最终名次]
    Q --> R[填写奖金金额]
    R --> S[记录结束时间]
    S --> T[添加总结笔记]
    T --> U[保存完成记录]
    U --> V[查看ROI结果]
    V --> W[返回首页]
```

### 2.4 数据分析流程

```mermaid
flowchart TD
    A[首页] --> B[进入分析页面]
    B --> C[查看总览数据]
    
    C --> D{选择分析维度}
    D --> E[按时间分析]
    D --> F[按游戏类型分析]
    D --> G[按地点分析]
    D --> H[按盲注级别分析]
    
    E --> I[查看图表数据]
    F --> I
    G --> I
    H --> I
    
    I --> J{需要筛选?}
    J -->|是| K[设置筛选条件]
    K --> I
    
    I --> L{需要分享?}
    L -->|是| M[导出/分享数据]
    M --> N[选择分享方式]
    
    I --> O{需要深入分析?}
    O -->|是| P[查看详细数据]
    P --> Q[查看单场战绩]
    
    N --> R[返回分析页]
    Q --> R
    R --> S[返回首页]
```

### 2.5 设置与配置流程

```mermaid
flowchart TD
    A[首页] --> B[进入设置页面]
    B --> C{选择设置类别}
    
    C --> D[账户设置]
    D --> D1[修改个人信息]
    D --> D2[修改密码]
    D --> D3[关联第三方账号]
    
    C --> E[应用设置]
    E --> E1[主题切换]
    E --> E2[语言设置]
    E --> E3[通知设置]
    
    C --> F[数据管理]
    F --> F1[数据备份]
    F --> F2[数据恢复]
    F --> F3[数据导出]
    
    C --> G[场地管理]
    G --> G1[添加常用场地]
    G --> G2[编辑场地信息]
    G --> G3[删除场地]
    
    C --> H[关于与帮助]
    H --> H1[查看应用版本]
    H --> H2[检查更新]
    H --> H3[查看帮助文档]
    H --> H4[联系支持]
    
    D1 --> I[返回设置页]
    D2 --> I
    D3 --> I
    E1 --> I
    E2 --> I
    E3 --> I
    F1 --> I
    F2 --> I
    F3 --> I
    G1 --> I
    G2 --> I
    G3 --> I
    H1 --> I
    H2 --> I
    H3 --> I
    H4 --> I
    
    I --> J[返回首页]
```

## 3. 关键用户任务流程

### 3.1 快速记录流程

```mermaid
flowchart TD
    A[游戏进行中] --> B[打开应用]
    B --> C[进入当前记录]
    C --> D{选择操作}
    
    D --> E[快速买入]
    E --> E1[选择买入金额]
    E1 --> E2[确认买入]
    
    D --> F[快速笔记]
    F --> F1[选择笔记类型]
    F1 -->|文本| F2[输入笔记]
    F1 -->|语音| F3[录制语音]
    F1 -->|图片| F4[拍摄照片]
    
    E2 --> G[保存并返回]
    F2 --> G
    F3 --> G
    F4 --> G
    
    G --> H[继续游戏]
```

### 3.2 分享战绩流程

```mermaid
flowchart TD
    A[分析页面] --> B[选择要分享的数据]
    B --> C[点击分享按钮]
    C --> D[生成分享卡片]
    D --> E{选择分享方式}
    
    E --> F[社交媒体]
    E --> G[复制链接]
    E --> H[保存图片]
    E --> I[导出PDF]
    
    F --> J[打开社交应用]
    J --> K[编辑分享内容]
    K --> L[发布分享]
    
    G --> M[链接复制成功]
    H --> N[图片保存成功]
    I --> O[PDF保存成功]
    
    L --> P[分享完成]
    M --> P
    N --> P
    O --> P
    
    P --> Q[返回分析页面]
```

## 4. 错误处理流程

### 4.1 网络错误处理

```mermaid
flowchart TD
    A[用户操作] --> B{网络连接检查}
    B -->|正常| C[执行操作]
    B -->|异常| D[显示网络错误]
    
    D --> E[本地数据保存]
    E --> F{是否重要操作?}
    F -->|是| G[提示用户重试]
    F -->|否| H[后台排队等待网络恢复]
    
    G --> I{用户选择}
    I -->|重试| B
    I -->|稍后| H
    
    H --> J[网络恢复检测]
    J --> K{网络恢复?}
    K -->|是| C
    K -->|否| J
    
    C --> L[操作成功]
```

### 4.2 数据同步冲突处理

```mermaid
flowchart TD
    A[数据同步] --> B{检测数据冲突}
    B -->|无冲突| C[正常同步]
    B -->|有冲突| D[分析冲突类型]
    
    D --> E{冲突类型?}
    E -->|可自动解决| F[按规则自动合并]
    E -->|需用户决策| G[显示冲突详情]
    
    G --> H[提供选择选项]
    H --> I{用户选择}
    I -->|使用本地版本| J[保留本地数据]
    I -->|使用云端版本| K[采用云端数据]
    I -->|合并两者| L[手动合并]
    
    F --> M[冲突解决]
    J --> M
    K --> M
    L --> M
    
    M --> N[继续同步过程]
    C --> O[同步完成]
    N --> O
```

## 5. 关键状态转换

### 5.1 记录状态转换

```mermaid
stateDiagram-v2
    [*] --> 创建
    创建 --> 进行中: 保存基本信息
    进行中 --> 已完成: 记录结果保存
    进行中 --> 已取消: 用户取消
    已取消 --> [*]
    已完成 --> [*]
    
    进行中 --> 进行中: 追加买入/添加笔记
    已完成 --> 已编辑: 修改记录
    已编辑 --> 已完成: 保存修改
```

### 5.2 用户状态转换

```mermaid
stateDiagram-v2
    [*] --> 游客
    游客 --> 注册用户: 完成注册
    注册用户 --> 活跃用户: 记录第一条数据
    活跃用户 --> 忠实用户: 连续使用>14天
    活跃用户 --> 休眠用户: 7天未使用
    休眠用户 --> 活跃用户: 重新使用
    休眠用户 --> 流失用户: 30天未使用
    流失用户 --> 活跃用户: 重新激活
``` 